!function(e,r){if(e){for(var o,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},t=1;t<20;++t)i[111+t]="f"+t;for(t=0;t<=9;++t)i[t+96]=t.toString();w.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},w.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},w.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},w.prototype.reset=function(){return this._callbacks={},this._directMap={},this},w.prototype.stopCallback=function(e,t){var n;return!(-1<(" "+t.className+" ").indexOf(" mousetrap "))&&(!function e(t,n){return null!==t&&t!==r&&(t===n||e(t.parentNode,n))}(t,this.target)&&("composedPath"in e&&"function"==typeof e.composedPath&&((n=e.composedPath()[0])!==e.target&&(t=n)),"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable))},w.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},w.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);o=null},(w.init=function(){var t=w(r);for(var e in t)"_"!==e.charAt(0)&&(w[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))})(),e.Mousetrap=w,"undefined"!=typeof module&&module.exports&&(module.exports=w),"function"==typeof define&&define.amd&&define(function(){return w})}function a(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function v(e){if("keypress"!=e.type)return i[e.which]?i[e.which]:n[e.which]?n[e.which]:String.fromCharCode(e.which).toLowerCase();var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}function b(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function l(e,t,n){return"keypress"==(n=n||(function(){if(!o)for(var e in o={},i)95<e&&e<112||i.hasOwnProperty(e)&&(o[i[e]]=e);return o}()[e]?"keydown":"keypress"))&&t.length&&(n="keydown"),n}function g(e,t){for(var n,r,o=[],i="+"===(r=e)?["+"]:(r=r.replace(/\+{2}/g,"+plus")).split("+"),a=0;a<i.length;++a)n=i[a],s[n]&&(n=s[n]),t&&"keypress"!=t&&c[n]&&(n=c[n],o.push("shift")),b(n)&&o.push(n);return{key:n,modifiers:o,action:t=l(n,o,t)}}function w(e){var d=this;if(e=e||r,!(d instanceof w))return new w(e);d.target=e,d._callbacks={},d._directMap={};var s,y={},l=!(d.resetSequenceTimeout=3e3),u=!1,p=!1;function f(e){e=e||{};var t,n=!1;for(t in y)e[t]?n=!0:y[t]=0;n||(p=!1)}function h(e,t,n,r,o,i){var a,c,s,l=[],u=n.type;if(!d._callbacks[e])return[];for("keyup"==u&&b(e)&&(t=[e]),a=0;a<d._callbacks[e].length;++a){var p,f,h=d._callbacks[e][a];!r&&h.seq&&y[h.seq]!=h.level||u==h.action&&(("keypress"!=u||n.metaKey||n.ctrlKey)&&(c=t,s=h.modifiers,c.sort().join(",")!==s.sort().join(","))||(p=!r&&h.combo==o,f=r&&h.seq==r&&h.level==i,(p||f)&&d._callbacks[e].splice(a,1),l.push(h)))}return l}function m(e,t,n,r){var o,i;d.stopCallback(t,t.target||t.srcElement,n,r)||!1===e(t,n)&&((i=t).preventDefault?i.preventDefault():i.returnValue=!1,(o=t).stopPropagation?o.stopPropagation():o.cancelBubble=!0)}function t(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,n,r=v(e);r&&("keyup"!=e.type||l!==r?d.handleKey(r,(n=[],(t=e).shiftKey&&n.push("shift"),t.altKey&&n.push("alt"),t.ctrlKey&&n.push("ctrl"),t.metaKey&&n.push("meta"),n),e):l=!1)}function c(t,e,n,r){function o(e){return function(){p=e,++y[t],clearTimeout(s),s=setTimeout(f,d.resetSequenceTimeout)}}function i(e){m(n,e,t),"keyup"!==r&&(l=v(e)),setTimeout(f,10)}for(var a=y[t]=0;a<e.length;++a){var c=a+1===e.length?i:o(r||g(e[a+1]).action);k(e[a],c,r,t,a)}}function k(e,t,n,r,o){d._directMap[e+":"+n]=t;var i,a=(e=e.replace(/\s+/g," ")).split(" ");1<a.length?c(e,a,t,n):(i=g(e,n),d._callbacks[i.key]=d._callbacks[i.key]||[],h(i.key,i.modifiers,{type:i.action},r,e,o),d._callbacks[i.key][r?"unshift":"push"]({callback:t,modifiers:i.modifiers,action:i.action,seq:r,level:o,combo:e}))}d._handleKey=function(e,t,n){for(var r=h(e,t,n),o={},i=0,a=!1,c=0;c<r.length;++c)r[c].seq&&(i=Math.max(i,r[c].level));for(c=0;c<r.length;++c)if(r[c].seq){if(r[c].level!=i)continue;a=!0,o[r[c].seq]=1,m(r[c].callback,n,r[c].combo,r[c].seq)}else a||m(r[c].callback,n,r[c].combo);var s="keypress"==n.type&&u;n.type!=p||b(e)||s||f(o),u=a&&"keydown"==n.type},d._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)k(e[r],t,n)},a(e,"keypress",t),a(e,"keydown",t),a(e,"keyup",t)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null);